{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>한국건설품질시험원(주)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">    
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

<div class="top-auth-bar">
    <div class="container d-flex justify-content-end align-items-center gap-3">
        {% if user.is_authenticated %}
            <span><strong>{{ user.username }}</strong>님 환영합니다.</span>
            <form action="/logout/" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-outline-danger py-0">로그아웃</button>
            </form>
        {% else %}
            <form action="/login/" method="post" class="d-flex gap-2">
                {% csrf_token %}
                
                {% if form.errors %}
                    <script>alert("아이디 또는 비밀번호가 일치하지 않습니다.");</script>
                {% endif %}

                <input type="text" name="username" class="form-control form-control-sm auth-input" placeholder="아이디" required>
                <input type="password" name="password" class="form-control form-control-sm auth-input" placeholder="비밀번호" required>
                <button type="submit" class="btn btn-sm btn-primary">로그인</button>
            </form>
            <a href="/signup/" class="btn btn-sm btn-success">회원가입</a>
        {% endif %}
    </div>
</div>

<div class="header-main">
    <div class="container-fluid px-5">
        <div class="row align-items-center">
            <div class="col-md-2">
                <a href="/">
                    <img src="{% static 'images/kcqt_logo.jpg' %}" alt="KCQT 로고" class="header-logo-img">
                </a>
            </div>
            <div class="col-md-8 text-center">
                <h1 class="institute-title mb-0">한국건설품질시험원(주)</h1>
            </div>
            <div class="col-md-2 text-end">
                <p class="contact-info mb-0">문의: 031-946-5518</p>
            </div>
        </div>
    </div>
</div>

<nav class="main-menu-bar shadow-sm">
        <div class="container p-0">
            <ul class="nav justify-content-center">
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="checkLogin('/board/')">접수 현황</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="checkLogin('/request/')">품질검사 의뢰</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="checkLogin('/report/')">품질검사 성적서</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="checkLogin('/notice/')">공지사항</a>
                </li>
            </ul>
        </div>
    </nav>

<div class="main-hero-slider">
    <div class="slide-item" style="background-image: url('{% static "images/img1.jpg" %}');">
        <div class="slide-content">
            <h2 class="display-3 fw-bold">확신보다 확인으로!</h2>
            <p class="fs-4">철저한 품질시험으로 안전한 건설 문화를 만듭니다.</p>
        </div>
    </div>
    
    <div class="slide-item" style="background-image: url('{% static "images/img2.jpg" %}');">
        <div class="slide-content">
            <h2 class="display-3 fw-bold">정확한 시험 데이터</h2>
            <p class="fs-4">국가 공인 시험기관의 신뢰도를 경험하세요.</p>
        </div>
    </div>

    <div class="slide-item" style="background-image: url('{% static "images/img3.jpg" %}');">
        <div class="slide-content">
            <h2 class="display-3 fw-bold">최고의 기술력</h2>
            <p class="fs-4">한국건설품질시험원(주)이 함께합니다.</p>
        </div>
    </div>
</div>

<script src="{% static 'js/jquery-1.12.3.min.js' %}"></script>
<script src="{% static 'js/slick.min.js' %}"></script>
<script>
    // 장고 템플릿 태그를 이용해 로그인 여부를 자바스크립트 변수에 저장
    const isAuthenticated = "{{ user.is_authenticated|yesno:'true,false' }}" === "true";

    function checkLogin(targetUrl) {
        if (isAuthenticated) {
            // 로그인 상태면 해당 페이지로 이동
            location.href = targetUrl;
        } else {
            // 로그인 상태가 아니면 알림창을 띄우고 로그인 폼으로 포커스
            alert("로그인을 해주세요.");
            
            // 만약 아이디 입력창이 있다면 그쪽으로 포커스를 줍니다.
            const loginInput = document.querySelector('input[name="username"]');
            if (loginInput) {
                loginInput.focus();
            }
        }
    }

    $(document).ready(function(){
        $('.main-hero-slider').slick({
            autoplay: true,
            autoplaySpeed: 3000,
            fade: true,
            dots: true,
            arrows: false,
            infinite: true
        });
    });

    
</script>
</body>
</html>